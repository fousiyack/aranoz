{% load static%}
<!DOCTYPE html>
<html lang="zxx">
  <!-- Mirrored from preview.colorlib.com/theme/aranoz/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 03 Feb 2023 04:26:34 GMT -->
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Great Kart</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel="icon" href="{% static 'img/favicon.png'%}" />

    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css'%}" />

    <link rel="stylesheet" href="{% static 'css/animate.css'%}" />

    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css'%}" />

    <link rel="stylesheet" href="{% static 'css/all.css'%}" />

    <link rel="stylesheet" href="{% static 'css/flaticon.css'%}" />
    <link rel="stylesheet" href="{%static 'css/themify-icons.css'%}" />

    <link rel="stylesheet" href="{% static 'css/magnific-popup.css'%}" />

    <link rel="stylesheet" href="{% static 'css/slick.css'%}" />

    <link rel="stylesheet" href="{%static 'css/style.css'%}" />
   
  </head>
  <body>
    <header class="main_menu home_menu">
      <div class="container-fluid">
      <div class="row align-items-center">
      <div class="col-lg-12">
      <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #e3f2fd;">
          <a class="navbar-brand" href="{%url 'home'%}"> <img src="{% static 'img/logo.png'%}" alt="logo"> </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="menu_icon"><i class="fas fa-bars"></i></span>
      </button>
      <div class="collapse navbar-collapse main-menu-item" id="navbarSupportedContent">
      <ul class="navbar-nav">
          <li class="nav-item">
              <a class="nav-link" href="{%url 'home'%}">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{%url 'store'%}">Shop</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="{%url 'category'%}" id="navbarDropdown_1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  All Category
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown_1">
                    <a class="dropdown-item" href="{%url 'store'%}">All Products</a>
                    {% for category in links%}
                  <a class="dropdown-item" href="{{category.get_url}}">{{category.category_name}}</a>
                {%endfor%}
                  </div>
                  </li>
     
      <li class="nav-item">
        <a class="nav-link" href="contact.html">Contact</a>
        </li>
        <div class="d-flex justify-content-end mb-3 mb-lg-0">
         {%if user.id is None%}
          <div class="widget-header">
            <small class="title text-muted">Welcome guest!</small>
          <div> 
            <a  href="{% url 'login'%}">Login</a><span class="dark-transp">|</span>
            <a  href="{% url 'register'%}">Register</a>
          </div>
        </div>
        {%else%}
        <div class="widget-header">
          <small class="title text-muted">Welcome {{user.first_name}}!</small>
        <div> 
          <a  href="{%url 'dashboard'%}">Dashboard</a><span class="dark-transp">|</span>
          <a  href="{% url 'logout'%}">Logout</a>
        </div>
      </div>
        {%endif%}
       
        
      </ul>
      </div>
      <div class="hearer_icon d-flex">
      <a id="search_1" href="{%static 'javascript:void(0)'%}"><i class="ti-search"></i></a>
      <a href="{% url 'wishlist' %}"><i class="ti-heart"></i></a>
      <div class="dropdown cart">
      <a class="dropdown-toggle" href="{% url 'cart' %}" id="navbarDropdown3" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <i class="fas fa-cart-plus"></i>
      </a>
      
      </div>
      </div>
      </nav>
      </div>
      </div>
      </div>

  </header>

<section class="checkout_area padding_top">
  <div class="container">
    <h2>Product Checkout</h2>
  

    <div class="cupon_area">
      <div class="check_title">
      <h2>
    <a href="{%url 'coupon'%}">Have a coupon?</a>  
    
      </h2>
      </div>
   <form id="coupon-form">
    {% csrf_token %}
      <input type="text" id="coupon" name="coupon" value="" placeholder="Enter coupon code" />
       <button  class="tp_btn"  type="submit">Apply Coupon</button>
        
   </form>
   
<div id="coupon-messages"></div>
      </div>
   
   
      <div class="text-center padding-bottom-5">
      <a href=" {% url 'address:address_list' %} "> <b>Change address</b></a> 
     
     </div> 


    <div class="billing_details">
      <div class="row">
        <div class="col-lg-8">
          <h3>Billing Details</h3>
          <form
            class="row contact_form"
            action="{%url 'place_order'%}"
            method="POST"
          >
          {%csrf_token%}
            <div class="col-md-6 form-group p_star">
              <input type="text" class="form-control" id="first"value="{{userprofile.first_name}}" name="first_name"placeholder="First Name"required />
             
            </div>
            <div class="col-md-6 form-group p_star">
              <input type="text" class="form-control" id="last"value="{{userprofile.last_name}}" name="last_name"placeholder="Last Name" required/>
  
            </div>
           
            <div class="col-md-6 form-group p_star">
              <input
                type="text"
                class="form-control"
                id="phone"value="{{userprofile.phone}}"
                name="phone"placeholder="Phone Number"required
              />
            </div>
            <div class="col-md-6 form-group p_star">
              <input
                type="text"
                class="form-control"
                id="email"value="{{request.user.email}}"
                name="email"placeholder="Email"
                required/>

            </div>
           
            <div class="col-md-12 form-group p_star">
              <input type="text" class="form-control" id="add1"value="{{userprofile.address_line_1}}" name="address_line_1" placeholder="Address 1"required/>
         
            </div>
            <div class="col-md-12 form-group p_star">
              <input type="text" class="form-control" id="add2"value="{{userprofile.address_line_2}}" name="address_line_2" placeholder="Address 2"required/>

            </div>
            <div class="col-md-6 form-group p_star">
              <input type="text" class="form-control" id="city"value="{{userprofile.city}}" name="city"placeholder="City" required/>

            </div>
            <div class="col-md-6 form-group p_star">
              <input type="text" class="form-control" id="country"value="{{userprofile.country}}" name="country"placeholder="Country" required/>

            </div>
            <div class="col-md-6 form-group p_star">
              <input type="text" class="form-control" id="state"value="{{userprofile.state}}" name="state"placeholder="State" required/>

            </div>
           
           
            <div class="col-md-6 form-group">
              <input
                type="text"
                class="form-control"
                id="zip_code"
                name="zip_code"value="{{userprofile.zip_code}}"
                placeholder="Postcode/ZIP"
                required/>
            </div>
         
            <textarea class="form-control" name="message" id="message" rows="1" placeholder="Order Notes"></textarea>
          
            {% comment %} <button type="submit"name="submit" class="btn_3 center">Save</button> {% endcomment %}
            <div class="creat_account">
              <input type="checkbox" id="f-option4" name="selector" checked/>
              <label for="f-option4">Create an account? </label>
            
            </div>
          
        </div>
    
        <div class="col-lg-4">
          <div class="order_box">
            <h2>Your Order Summary</h2>
            <ul class="list">
              <li>
                <a href="#"
                  ><strong>Product</strong>

                  <span><strong>Total</strong></span>
                </a>
              </li>
              {% for cart_item in cart_items%}
              <li>
                <a href="#"
                  >
                 <img src="" alt="">
                  {{cart_item.product.product_name}}
                 
                 
                  <span class="middle">x {{cart_item.quantity}}</span>
                  <span class="last">${{cart_item.sub_total}}</span>
                </a>
              </li>
              {%endfor%}
            </ul>
            <ul class="list list_2">
              <li>
                <a href="#"
                  >Total
                  <span>{{total}}</span>
                </a>
              </li>
              <li>
                <a href="#"
                  >Tax
                  <span>{{tax}}</span>
                </a>
              </li>
              {% comment %} {%if coupon_code%} {% endcomment %}
              <li>
                <a href="#"
                  >Coupon 
                  <span id="appliedCoupon">{{coupon_code}} </span>
                </a>
              </li>
              {% comment %} {%endif%} {% endcomment %}
              <li>
                <a href="#"
                  >Discount
                  <span id="discount">{{discount}} </span>
                 
                </a>
              </li>
             
             
              <li>
                <a href="#"
                  >Grand Total
                  <span id="grand-total">{{grand_total}}</span>
                  {% comment %} <span id="gtotal">{{grand_total}} /-Rupees</span> {% endcomment %}
             
                </a>
              </li>
            </ul>
      

            <input type="hidden" value="COD"name="payment_mode">
<div class="mt-3">
  <button type="submit"class="btn-success w-100">COD | Place Order</button>
</form>
  <button type="button" id="payWithRazorpay"  class="payWithRazorpay  btn-primary w-100 mt-2">Pay with Razorpay</button>
  <a href="{% url 'store' %}" class="btn btn-light btn-block">Continue Shopping</a>

</div>
           
          </div>
        </div>
      </div>
    </div>
  </div>

</section>

  </body>
  {%include 'include/footer.html'%}
 {% comment %} razorpay {% endcomment %}
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
 <script src="https://checkout.razorpay.com/v1/checkout.js" type="application/javascript"></script>
 <script src="{% static 'js/checkout.js' %}"></script>


 <script>
  {% comment %} var options = {
      "key": "rzp_test_HqkHmr4VjtnaDO", // Enter the Key ID generated from the Dashboard
      "amount": "50000", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
      "currency": "INR",
      "name": "Acme Corp", //your business name
      "description": "Test Transaction",
      "image": "https://example.com/your_logo",
      
       // "order_id": "20",
      
     // "order_id": "order_9A33XWu170gUtm", //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
      "callback_url": "https://eneqd3r9zrjok.x.pipedream.net/",
      "prefill": {
          "name": "Gaurav Kumar", //your customer's name
          "email": "gaurav.kumar@example.com",
          "contact": "9000090000"
      },
      "notes": {
          "address": "Razorpay Corporate Office"
      },
      "theme": {
          "color": "#3399cc"
      }
  };
  var rzp1 = new Razorpay(options);
  document.getElementById('rzp-button1').onclick = function(e){
      rzp1.open();
      e.preventDefault();
  } {% endcomment %}
  </script>

 
  <script src="{%static 'js/jquery-1.12.1.min.js'%}"></script>

  <script src="{%static 'js/popper.min.js'%}"></script>

  <script src="{%static 'js/bootstrap.min.js'%}"></script>

  <script src="{%static 'js/jquery.magnific-popup.js'%}"></script>

  <script src="{%static 'js/swiper.min.js' %}"></script>

  <script src="{%static 'js/masonry.pkgd.js'%}"></script>

  <script src="{%static 'js/owl.carousel.min.js'%}"></script>
  <script src="{%static 'js/jquery.nice-select.min.js'%}"></script>

  <script src="{%static 'js/slick.min.js'%}"></script>
  <script src="{%static 'js/jquery.counterup.min.js'%}"></script>
  <script src="{%static 'js/waypoints.min.js'%}"></script>
  <script src="{%static 'js/contact.js'%}"></script>
  <script src="{%static 'js/jquery.ajaxchimp.min.js'%}"></script>
  <script src="{%static 'js/jquery.form.js'%}"></script>
  <script src="{%static 'js/jquery.validate.min.js'%}"></script>
  <script src="{% static 'js/mail-script.js'%}"></script>

  <script src="{% static 'js/custom.js' %}"></script>
 

  


  <script src=" https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>

  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "UA-23581568-13");
  </script>
  <script
    defer
    src="https://static.cloudflareinsights.com/beacon.min.js/vaafb692b2aea4879b33c060e79fe94621666317369993"
    integrity="sha512-0ahDYl866UMhKuYcW078ScMalXqtFJggm7TmlUtp0UlD4eQk0Ixfnm5ykXKvGJNFjLMoortdseTfsRT8oCfgGA=="
    data-cf-beacon='{"rayId":"793868b96a4285ea","token":"cd0b4b3a733644fc843ef0b185f98241","version":"2022.11.3","si":100}'
    crossorigin="anonymous"
  ></script>
  <script>
    

    
      $(document).ready(function() {
        // Listen for the submit event on the Apply Coupon form
        $('#coupon-form').on('submit', function(event) {
          event.preventDefault();
          // Make an AJAX call to apply the coupon
          $.ajax({
            url: '{% url "apply_coupon" %}',
            type: 'POST',
            data: $(this).serialize(),
            success: function(response) {
              // Update the grand total value with the updated order total
              $('#grand-total').text(response.grand_total);
              $('#discount').text(response.discount);
              $('#appliedCoupon').text(response.coupon_code);
            },
            error: function(xhr, status, error) {
              alert('Error: ' + error);
            }
          });
        });
      });
    


  function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i<cookies.length; i++) {
              const cookie = cookies[i].trim();
              // Does this cookie string begin with the name we want?
              if (cookie.substring(0,name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }


   




</script>


</body>
</html>
